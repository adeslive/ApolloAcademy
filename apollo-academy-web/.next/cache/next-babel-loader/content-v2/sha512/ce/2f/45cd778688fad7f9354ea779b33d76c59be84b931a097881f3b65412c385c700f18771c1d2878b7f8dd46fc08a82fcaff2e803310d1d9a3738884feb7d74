{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/Usuario/Documents/Proyectos/apollo-academy/apollo-academy-web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Usuario/Documents/Proyectos/apollo-academy/apollo-academy-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"C:/Users/Usuario/Documents/Proyectos/apollo-academy/apollo-academy-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectDestructuringEmpty from \"C:/Users/Usuario/Documents/Proyectos/apollo-academy/apollo-academy-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";\nimport { Button } from '@chakra-ui/button';\nimport { Box } from '@chakra-ui/layout';\nimport { Form, Formik } from 'formik';\nimport { withUrqlClient } from 'next-urql';\nimport { useRouter } from 'next/router';\nimport InputField from '../components/InputField';\nimport Layout from '../components/Layout';\nimport { useLoginMutation } from '../generated/graphql';\nimport ErrorMap from '../utils/error-map';\nimport { urqlClient } from '../utils/urqlClient';\nimport NextLink from 'next/link';\nimport { Link, Text, Center, Image, Stack } from \"@chakra-ui/react\";\nimport { Header } from \"../components/Header\";\nimport { ExternalLinkIcon } from '@chakra-ui/icons';\n\n// TO DO Cambiar mutacion\n// Luego de que se cambie el proceso de registro, se tiene que cambiar la mutacion a un UserResponse\nvar Login = function Login(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  var router = useRouter();\n\n  var _useLoginMutation = useLoginMutation(),\n      _useLoginMutation2 = _slicedToArray(_useLoginMutation, 2),\n      login = _useLoginMutation2[1];\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(Box, {\n      bgGradient: \"linear(to-r, green.200, pink.500)\",\n      position: \"fixed\",\n      width: \"100%\",\n      height: \"100%\",\n      children: /*#__PURE__*/_jsx(Center, {\n        children: /*#__PURE__*/_jsxs(Box, {\n          maxW: \"md\",\n          borderWidth: \"1px\",\n          borderRadius: \"lg\",\n          backgroundColor: \"white\",\n          width: \"100%\",\n          margin: \"1%\",\n          height: \"520px\",\n          children: [/*#__PURE__*/_jsx(Text, {\n            fontSize: \"28px\",\n            fontWeight: \"bold\",\n            padding: \"25px 25px 0 25px\",\n            color: \"#D7933A\",\n            children: \"Iniciar Sesi\\xF3n\"\n          }), /*#__PURE__*/_jsxs(Layout, {\n            children: [/*#__PURE__*/_jsx(Formik, {\n              initialValues: {\n                password: \"\",\n                email: \"\"\n              },\n              onSubmit: /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values, _ref2) {\n                  var _res$data, _res$data3;\n\n                  var setErrors, res, _res$data2;\n\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          setErrors = _ref2.setErrors;\n                          _context.next = 3;\n                          return login(values);\n\n                        case 3:\n                          res = _context.sent;\n\n                          if ((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.login.errors) {\n                            setErrors(ErrorMap((_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.login.errors));\n                          } else if ((_res$data3 = res.data) !== null && _res$data3 !== void 0 && _res$data3.login.user) {\n                            router.push('/');\n                          }\n\n                        case 5:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x, _x2) {\n                  return _ref3.apply(this, arguments);\n                };\n              }(),\n              children: function children(_ref4) {\n                var isSubmitting = _ref4.isSubmitting;\n                return /*#__PURE__*/_jsxs(Form, {\n                  children: [/*#__PURE__*/_jsx(InputField, {\n                    name: \"email\",\n                    label: \"Correo Electr\\xF3nico\",\n                    placeholder: \"juan@ejemplo.com\",\n                    type: \"email\"\n                  }), /*#__PURE__*/_jsx(Box, {\n                    mt: 4,\n                    children: /*#__PURE__*/_jsx(InputField, {\n                      name: \"password\",\n                      label: \"Contrase\\xF1a\",\n                      placeholder: \"Contrase\\xF1a\",\n                      type: \"password\"\n                    })\n                  }), /*#__PURE__*/_jsxs(Stack, {\n                    children: [/*#__PURE__*/_jsx(Button, {\n                      mt: 4,\n                      type: \"submit\",\n                      isLoading: isSubmitting,\n                      colorScheme: \"teal\",\n                      children: \"Ingresar\"\n                    }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(\"a\", {\n                      href: \"http://localhost:8080/auth/facebook\",\n                      children: /*#__PURE__*/_jsxs(Button, {\n                        width: \"100%\",\n                        mt: 2,\n                        type: \"button\",\n                        colorScheme: \"facebook\",\n                        children: [/*#__PURE__*/_jsx(Image, {\n                          src: \"facebook_icon.png\",\n                          boxSize: \"20px\",\n                          borderRadius: \"full\",\n                          marginX: \"7px\"\n                        }), \"Iniciar con Facebook\"]\n                      })\n                    }), /*#__PURE__*/_jsx(\"a\", {\n                      href: \"http://localhost:8080/google\",\n                      children: /*#__PURE__*/_jsxs(Button, {\n                        width: \"100%\",\n                        mt: 2,\n                        type: \"button\",\n                        colorScheme: \"gray\",\n                        children: [/*#__PURE__*/_jsx(Image, {\n                          src: \"gmail_icon.png\",\n                          boxSize: \"20px\",\n                          borderRadius: \"full\",\n                          marginX: \"7px\"\n                        }), \"Iniciar con Google\"]\n                      })\n                    })]\n                  })]\n                });\n              }\n            }), /*#__PURE__*/_jsx(Box, {\n              paddingTop: \"25px\",\n              children: /*#__PURE__*/_jsx(NextLink, {\n                href: \"/restorepassword\",\n                children: /*#__PURE__*/_jsxs(Link, {\n                  color: \"teal.500\",\n                  children: [\"Olvidaste tu contrase\\xF1a\", /*#__PURE__*/_jsx(ExternalLinkIcon, {\n                    mx: \"2px\"\n                  })]\n                })\n              })\n            })]\n          })]\n        })\n      })\n    })]\n  });\n};\n\nexport default withUrqlClient(urqlClient)(Login);","map":null,"metadata":{},"sourceType":"module"}